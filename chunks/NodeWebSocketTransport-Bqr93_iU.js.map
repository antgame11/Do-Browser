{"version":3,"file":"NodeWebSocketTransport-Bqr93_iU.js","sources":["../../../../../node_modules/.pnpm/ws@8.18.3/node_modules/ws/browser.js","../../../../../node_modules/.pnpm/puppeteer-core@24.31.0/node_modules/puppeteer-core/lib/esm/puppeteer/node/NodeWebSocketTransport.js"],"sourcesContent":["'use strict';\n\nmodule.exports = function () {\n  throw new Error(\n    'ws does not work in the browser. Browser clients must use the native ' +\n      'WebSocket object'\n  );\n};\n","/**\n * @license\n * Copyright 2018 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport NodeWebSocket from 'ws';\nimport { packageVersion } from '../util/version.js';\n/**\n * @internal\n */\nexport class NodeWebSocketTransport {\n    static create(url, headers) {\n        return new Promise((resolve, reject) => {\n            const ws = new NodeWebSocket(url, [], {\n                followRedirects: true,\n                perMessageDeflate: false,\n                allowSynchronousEvents: false,\n                maxPayload: 256 * 1024 * 1024, // 256Mb\n                headers: {\n                    'User-Agent': `Puppeteer ${packageVersion}`,\n                    ...headers,\n                },\n            });\n            ws.addEventListener('open', () => {\n                return resolve(new NodeWebSocketTransport(ws));\n            });\n            ws.addEventListener('error', reject);\n        });\n    }\n    #ws;\n    onmessage;\n    onclose;\n    constructor(ws) {\n        this.#ws = ws;\n        this.#ws.addEventListener('message', event => {\n            if (this.onmessage) {\n                this.onmessage.call(null, event.data);\n            }\n        });\n        this.#ws.addEventListener('close', () => {\n            if (this.onclose) {\n                this.onclose.call(null);\n            }\n        });\n        // Silently ignore all errors - we don't know what to do with them.\n        this.#ws.addEventListener('error', () => { });\n    }\n    send(message) {\n        this.#ws.send(message);\n    }\n    close() {\n        this.#ws.close();\n    }\n}\n//# sourceMappingURL=NodeWebSocketTransport.js.map"],"names":["browser","_NodeWebSocketTransport","ws","__privateAdd","_ws","__publicField","__privateSet","__privateGet","event","url","headers","resolve","reject","NodeWebSocket","packageVersion","message","NodeWebSocketTransport"],"mappings":"gkBAEA,IAAAA,EAAiB,UAAY,CAC3B,MAAM,IAAI,MACR,uFAEJ,CACA,eCPA;AAAA;AAAA;AAAA;AAAA,SAUO,MAAMC,EAAN,MAAMA,CAAuB,CAsBhC,YAAYC,EAAI,CAHhBC,EAAA,KAAAC,GACAC,EAAA,kBACAA,EAAA,gBAEIC,EAAA,KAAKF,EAAMF,GACXK,EAAA,KAAKH,GAAI,iBAAiB,UAAWI,GAAS,CACtC,KAAK,WACL,KAAK,UAAU,KAAK,KAAMA,EAAM,IAAI,CAEpD,CAAS,EACDD,EAAA,KAAKH,GAAI,iBAAiB,QAAS,IAAM,CACjC,KAAK,SACL,KAAK,QAAQ,KAAK,IAAI,CAEtC,CAAS,EAEDG,EAAA,KAAKH,GAAI,iBAAiB,QAAS,IAAM,CAAG,CAAA,CAC/C,CAnCD,OAAO,OAAOK,EAAKC,EAAS,CACxB,OAAO,IAAI,QAAQ,CAACC,EAASC,IAAW,CACpC,MAAMV,EAAK,IAAIW,EAAcJ,EAAK,CAAA,EAAI,CAClC,gBAAiB,GACjB,kBAAmB,GACnB,uBAAwB,GACxB,WAAY,UACZ,QAAS,CACL,aAAc,aAAaK,CAAc,GACzC,GAAGJ,CACN,CACjB,CAAa,EACDR,EAAG,iBAAiB,OAAQ,IACjBS,EAAQ,IAAIV,EAAuBC,CAAE,CAAC,CAChD,EACDA,EAAG,iBAAiB,QAASU,CAAM,CAC/C,CAAS,CACJ,CAmBD,KAAKG,EAAS,CACVR,EAAA,KAAKH,GAAI,KAAKW,CAAO,CACxB,CACD,OAAQ,CACJR,EAAA,KAAKH,GAAI,OACZ,CACL,EAxBIA,EAAA,YAnBG,IAAMY,EAANf","x_google_ignoreList":[0,1]}